<div class="checkout-page">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-overlay"></div>
    <div class="container">
      <div class="header-content">
        <div class="header-breadcrumb">
          <a href="#" class="breadcrumb-link">ุงูุณูุฉ</a>
          <span class="breadcrumb-separator">/</span>
          <span class="breadcrumb-current">ุฅุชูุงู ุงูุทูุจ</span>
        </div>
        <h1>โ ุฅุชูุงู ุงูุทูุจ</h1>
        <p>ุฃููู ุจูุงูุงุชู ุจุณูููุฉ ูุฅุชูุงู ุนูููุฉ ุงูุทูุจ ุจุดูู ุงูู</p>
      </div>
      <div class="progress-indicator">
        <div class="progress-step completed">
          <span class="step-number">1</span>
          <span class="step-label">ุงูุณูุฉ</span>
        </div>
        <div class="progress-line"></div>
        <div class="progress-step active">
          <span class="step-number">2</span>
          <span class="step-label">ุงูุฏูุน</span>
        </div>
        <div class="progress-line"></div>
        <div class="progress-step">
          <span class="step-number">3</span>
          <span class="step-label">ุงูุชุฃููุฏ</span>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- Checkout with Items -->
    <div class="checkout-content" *ngIf="!orderPlaced && cartItems.length > 0">
      <div class="checkout-form-section">
        <form #f="ngForm" (ngSubmit)="submitOrder(f)" class="checkout-form">
          <!-- Shipping Information -->
          <div class="form-section">
            <div class="section-header">
              <h2>๐ ุจูุงูุงุช ุงูุนููู</h2>
              <span class="section-badge">ูุทููุจ</span>
            </div>

            <!-- Saved Addresses -->
            <div class="form-group">
              <label for="savedAddresses">ุงุฎุชุฑ ุนููุงููุง ูุญููุธูุง</label>
              <div class="select-wrapper">
                <select id="savedAddresses"
                        name="savedAddresses"
                        [(ngModel)]="selectedAddressIndex"
                        (change)="onAddressSelect($event)"
                        class="form-control custom-select">
                  <option value="-1">-- ุฅุถุงูุฉ ุนููุงู ุฌุฏูุฏ --</option>
                  <option *ngFor="let addr of savedAddresses; let i = index" [value]="i">
                    {{ addr.first_name }} - {{ addr.address_1 }}, {{ addr.city }}
                  </option>
                </select>
                <svg class="select-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="6 9 12 15 18 9"></polyline>
                </svg>
              </div>
            </div>

            <!-- Name, Phone, Email -->
            <div class="form-group">
              <label for="firstName">ุงูุงุณู ุงููุงูู *</label>
              <input type="text"
                     id="firstName"
                     [(ngModel)]="orderData.billing.first_name"
                     name="firstName"
                     placeholder="ุฃุฏุฎู ุงุณูู ุงููุงูู"
                     required />
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="phone">ุฑูู ุงูุฌูุงู *</label>
                <input type="tel"
                       id="phone"
                       [(ngModel)]="orderData.billing.phone"
                       name="phone"
                       placeholder="05xxxxxxxxx"
                       required />
              </div>
              <div class="form-group">
                <label for="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู *</label>
                <input type="email"
                       id="email"
                       [(ngModel)]="orderData.billing.email"
                       name="email"
                       placeholder="example@email.com"
                       required />
              </div>
            </div>

            <!-- City -->
            <div class="form-group">
              <label for="region">ุงูููุทูุฉ *</label>
            <div class="select-wrapper">
              <select [(ngModel)]="orderData.billing.state"
                      id="region"
                      name="region"
                      required
                      class="form-control custom-select">

                <option value="" disabled selected>ุงุฎุชุฑ ุงูููุทูุฉ</option>

                <option value="ููุทูุฉ ุงูุฑูุงุถ">ููุทูุฉ ุงูุฑูุงุถ</option>
                <option value="ููุทูุฉ ููุฉ ุงูููุฑูุฉ">ููุทูุฉ ููุฉ ุงูููุฑูุฉ</option>
                <option value="ููุทูุฉ ุงููุฏููุฉ ุงููููุฑุฉ">ููุทูุฉ ุงููุฏููุฉ ุงููููุฑุฉ</option>
                <option value="ููุทูุฉ ุงููุตูู">ููุทูุฉ ุงููุตูู</option>
                <option value="ุงูููุทูุฉ ุงูุดุฑููุฉ">ุงูููุทูุฉ ุงูุดุฑููุฉ</option>
                <option value="ููุทูุฉ ุนุณูุฑ">ููุทูุฉ ุนุณูุฑ</option>
                <option value="ููุทูุฉ ุชุจูู">ููุทูุฉ ุชุจูู</option>
                <option value="ููุทูุฉ ุญุงุฆู">ููุทูุฉ ุญุงุฆู</option>
                <option value="ููุทูุฉ ุงูุญุฏูุฏ ุงูุดูุงููุฉ">ููุทูุฉ ุงูุญุฏูุฏ ุงูุดูุงููุฉ</option>
                <option value="ููุทูุฉ ุฌุงุฒุงู">ููุทูุฉ ุฌุงุฒุงู</option>
                <option value="ููุทูุฉ ูุฌุฑุงู">ููุทูุฉ ูุฌุฑุงู</option>
                <option value="ููุทูุฉ ุงูุจุงุญุฉ">ููุทูุฉ ุงูุจุงุญุฉ</option>
                <option value="ููุทูุฉ ุงูุฌูู">ููุทูุฉ ุงูุฌูู</option>

              </select>

              <svg class="select-icon" width="20" height="20" viewBox="0 0 24 24"
                  fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </div>

            </div>

          <!-- City -->
            <div class="form-group">
              <label for="city">ุงููุฏููุฉ *</label>
              <input type="text"
                     id="city"
                     [(ngModel)]="orderData.billing.city"
                     name="city"
                     placeholder="ุฃุฏุฎู ุงููุฏููุฉ  "
                     required />
            </div>

            <!-- Address -->
            <div class="form-group">
              <label for="address">ุงุณู ุงูุญู *</label>
              <input type="text"
                     id="address"
                     [(ngModel)]="orderData.billing.address_1"
                     name="address"
                     placeholder="ุฃุฏุฎู ุงุณู ุงูุญู"
                     required />
            </div>
          </div>

          <!-- Payment Method (Cash on Delivery) -->
          <div class="form-section">
            <div class="section-header">
              <h2> </h2>
            </div>
            <div class="payment-methods">
              <label class="payment-method">
                <input type="radio"
                       name="payment"
                       [(ngModel)]="orderData.payment_method"
                       [value]="'cod'"
                       (change)="orderData.payment_method_title = ' ุงูุฏูุน ุญุณุจ ุงูุงุชูุงู ูุน ุงููุตูุน  '"
                       checked />
                <div class="payment-content">
                  <div class="payment-icon">๐ต</div>
                  <div class="payment-info">
                    <span class="payment-title"> ุงูุณุฏุงุฏ ุญุณุจ ุงูุณูุงุณุงุช ุงููุงููุฉ ุงููุนุชูุฏุฉ ุจุงููุตูุน </span>
                  </div>
                </div>
                <span class="payment-check"></span>
              </label>
            </div>
          </div>

          <!-- Order Warning -->
          <div *ngIf="orderWarningMessage" class="order-warning">
            {{ orderWarningMessage }}
            <a routerLink="/" class="btn-complete-marketing">ุงููุงู ุงูุชุณููู</a>
          </div>

          <!-- Submit Button -->
          <button type="submit"
                  class="btn btn-primary btn-submit"
                  >
            <span class="btn-icon" *ngIf="!submitting">โ</span>
            <span class="btn-spinner" *ngIf="submitting">
              <span class="spinner"></span>
            </span>
            {{ submitting ? 'ุฌุงุฑู ุฅุฑุณุงู ุงูุทูุจ...' : 'ุชุฃููุฏ ุงูุทูุจ    ' }}
          </button>



          <!-- Security Info -->
          <div class="security-info">
            <div class="security-item">
              <span class="security-icon">โ</span>
              <span class="security-text">ุณูุชู ุงูุชูุงุตู ูุนูู ูุฑูุจูุง ุ ูุชูุฏูู ุงูุณุนุฑ ุงูููุงุณุจ ููู ุ ูููุชุฌุงุช ูุชููุฒุฉ</span>
            </div>

          </div>
        </form>
      </div>

      <!-- Order Summary Section -->
      <div class="order-summary-section">
        <div class="order-summary">
          <div class="summary-header">
            <h2>๐ฆ ููุฎุต ุงูุทูุจ</h2>
            <span class="summary-badge">ุนุฏุฏ ุงูููุชุฌุงุช: {{ cartItems.length }} </span>
          </div>

          <!-- Order Items -->
          <div class="summary-items">
            <div class="summary-item" *ngFor="let item of cartItems">
              <div class="item-info">
                <div class="item-image">
                  <img [src]="item.product.images && item.product.images.length > 0 ? item.product.images[0].src : 'https://via.placeholder.com/50'"
                       [alt]="item.product.name" />
                </div>
                <div class="item-details">
                  <span class="item-name">{{ item.product.name }}</span>
                  <span class="item-qty">ุงููููุฉ: {{ item.quantity }}</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Summary Totals -->
          <div class="summary-divider"></div>
          <div class="summary-totals">
            <!-- <div class="summary-row">
              <span class="summary-label">ุงููุฌููุน :</span>
              <span class="summary-value">{{ total }} ุฑูุงู</span>
            </div> -->


            <div class="summary-row discount" *ngIf="discountAmount > 0">

            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- ุญุงูุฉ ูุฌุงุญ ุงูุทูุจ -->
    <div *ngIf="orderPlaced" class="order-success-container" #orderSuccessSection>
      <div class="order-success-content">
        <i class="fas fa-check-circle success-icon">โ</i>
        <h2>ุชู ุงุณุชูุงู ุทูุจู ุจูุฌุงุญ!</h2>
        <p>ููุฏุฑ ููู ุฒูุงุฑุชูู ูุทูุจูู ูู ูููุน ุฃุณุณ ุงูุญููู ููุญูููุงุช . ุณูุชู ุงูุชูุงุตู ูุนูู ูุฑูุจุง ุ ูุชูุฏูู ุงูุณุนุฑ ุงูููุงุณุจ ููู ุ ูููุชุฌุงุช ูุชููุฒุฉ .</p>
        <a [routerLink]="['/']" class="btn btn-primary btn-lg mt-3">ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ</a>
      </div>
    </div>

    <!-- Empty Cart State -->
    <div class="empty-cart" *ngIf="!orderPlaced && cartItems.length === 0">
      <div class="empty-illustration">
        <div class="empty-icon">๐</div>
      </div>
      <h2>ุณูุฉ ุงูุชุณูู ูุงุฑุบุฉ</h2>
      <p>ูุง ููููู ุฅุชูุงู ุงูุทูุจ ุจุฏูู ููุชุฌุงุช. ุงุจุฏุฃ ุงูุชุณูู ุงูุขู!</p>
      <div class="empty-actions">
        <a routerLink="/products" class="btn btn-primary btn-large">
          <span class="btn-icon">๐๏ธ</span>
          ุชุตูุญ ุงูููุชุฌุงุช
        </a>
      </div>
    </div>
  </div>
</div>




